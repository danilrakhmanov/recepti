<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>üç≥ –ö–Ω–∏–≥–∞ –†–µ—Ü–µ–ø—Ç–æ–≤</title>
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="manifest.json">
    
    <!-- iOS Meta Tags -->
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="–†–µ—Ü–µ–ø—Ç—ã">
    <meta name="theme-color" content="#ff6b9d">
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="https://cdn-icons-png.flaticon.com/512/2919/2919586.png" sizes="512x512">
    <link rel="apple-touch-icon" href="https://cdn-icons-png.flaticon.com/512/2919/2919586.png">
    
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Comfortaa:wght@300;400;500;600;700&family=Pacifico&display=swap" rel="stylesheet">
    
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
</head>
<body>
    <canvas id="particlesCanvas" class="particles-canvas"></canvas>
    
    <!-- Loading Screen -->
    <div class="loading-screen" id="loadingScreen">
        <div class="loading-content">
            <div class="loading-spinner">
                <div class="spinner-ring"></div>
                <div class="spinner-ring"></div>
                <div class="spinner-ring"></div>
            </div>
            <div class="loading-text">
                <span class="loading-emoji">üç≥</span>
                <span class="loading-message">–ó–∞–≥—Ä—É–∑–∫–∞ —Ä–µ—Ü–µ–ø—Ç–æ–≤...</span>
            </div>
        </div>
    </div>

    <!-- Theme Toggle -->
    <button class="theme-toggle" id="themeToggle" title="–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —Ç–µ–º—É">
        <span class="theme-icon">üåô</span>
    </button>

    <!-- Auth Button -->
    <button class="auth-toggle" id="authToggle" title="–í–æ–π—Ç–∏ –≤ –∞–∫–∫–∞—É–Ω—Ç">
        <span class="auth-icon">üë§</span>
        <span class="auth-text" id="authText">–í–æ–π—Ç–∏</span>
    </button>

    <div class="container">
        <!-- Header -->
        <header class="header">
            <h1 class="title">
                <span class="title-text">–ö–Ω–∏–≥–∞ –†–µ—Ü–µ–ø—Ç–æ–≤</span>
            </h1>
            <p class="subtitle">–°–æ—Ö—Ä–∞–Ω—è–π –ª—é–±–∏–º—ã–µ —Ä–µ—Ü–µ–ø—Ç—ã –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ</p>
        </header>

        <!-- My Recipes Button -->
        <button class="my-recipes-btn" id="myRecipesBtn">
            <span class="btn-icon">üìñ</span>
            <span class="btn-text">–ú–æ–∏ —Ä–µ—Ü–µ–ø—Ç—ã</span>
        </button>

        <!-- Quick Actions -->
        <div class="quick-actions">
            <button class="quick-action-btn planner-quick-btn" data-filter="planner">
                <span class="quick-action-icon">üìÖ</span>
                <span class="quick-action-text">–ú–µ–Ω—é</span>
            </button>
            <button class="quick-action-btn shopping-quick-btn" data-filter="shopping">
                <span class="quick-action-icon">üõí</span>
                <span class="quick-action-text">–ü–æ–∫—É–ø–∫–∏</span>
            </button>
        </div>

        <!-- Search Bar -->
        <div class="search-container">
            <input type="text" class="search-input" id="searchInput" placeholder="üîç –ü–æ–∏—Å–∫ —Ä–µ—Ü–µ–ø—Ç–æ–≤...">
        </div>

        <!-- Filter Tabs -->
        <div class="filter-tabs">
            <button class="tab-btn active" data-filter="all">
                <span class="tab-icon">üìñ</span>
                <span class="tab-text">–í—Å–µ</span>
            </button>
            <button class="tab-btn" data-filter="first">
                <span class="tab-icon">üç≤</span>
                <span class="tab-text">–ü–µ—Ä–≤—ã–µ –±–ª—é–¥–∞</span>
            </button>
            <button class="tab-btn" data-filter="second">
                <span class="tab-icon">üçù</span>
                <span class="tab-text">–í—Ç–æ—Ä—ã–µ –±–ª—é–¥–∞</span>
            </button>
            <button class="tab-btn" data-filter="salads">
                <span class="tab-icon">ü•ó</span>
                <span class="tab-text">–°–∞–ª–∞—Ç—ã</span>
            </button>
            <button class="tab-btn" data-filter="snacks">
                <span class="tab-icon">üç¢</span>
                <span class="tab-text">–ó–∞–∫—É—Å–∫–∏</span>
            </button>
            <button class="tab-btn" data-filter="baking">
                <span class="tab-icon">ü•ê</span>
                <span class="tab-text">–í—ã–ø–µ—á–∫–∞</span>
            </button>
            <button class="tab-btn" data-filter="dessert">
                <span class="tab-icon">üç∞</span>
                <span class="tab-text">–î–µ—Å–µ—Ä—Ç—ã</span>
            </button>
            <button class="tab-btn favorites-tab" data-filter="favorites">
                <span class="tab-icon">‚ù§Ô∏è</span>
                <span class="tab-text">–ò–∑–±—Ä–∞–Ω–Ω–æ–µ</span>
            </button>
        </div>

        <!-- Add Recipe Button (separate, centered below filters) -->
        <div class="add-recipe-section">
            <button class="tab-btn add-recipe-tab" id="addRecipeTabBtn">
                <span class="tab-text">–î–æ–±–∞–≤–∏—Ç—å —Ä–µ—Ü–µ–ø—Ç</span>
            </button>
        </div>

        <!-- Recipe Grid -->
        <div class="recipe-grid" id="recipeGrid">
            <!-- Recipes will be dynamically added here -->
        </div>

        <!-- Weekly Menu Planner -->
        <div class="menu-planner" id="menuPlanner" style="display: none;">
            <div class="planner-header">
                <h2 class="planner-title"><span class="planner-emoji">üìÖ</span> <span class="planner-text">–ú–µ–Ω—é –Ω–∞ –Ω–µ–¥–µ–ª—é</span></h2>
                <button class="planner-action-btn" id="generateShoppingListBtn">
                    <span>–°—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å —Å–ø–∏—Å–æ–∫ –ø–æ–∫—É–ø–æ–∫</span>
                </button>
            </div>
            <div class="week-grid" id="weekGrid">
                <!-- Days will be dynamically added here -->
            </div>
        </div>

        <!-- Shopping List -->
        <div class="shopping-list" id="shoppingList" style="display: none;">
            <div class="shopping-header">
                <h2 class="shopping-title"><span class="shopping-emoji">üõí</span> <span class="shopping-text">–°–ø–∏—Å–æ–∫ –ø–æ–∫—É–ø–æ–∫</span></h2>
                <div class="shopping-actions">
                    <button class="shopping-action-btn primary" id="addShoppingItemBtn">
                        <span>–î–æ–±–∞–≤–∏—Ç—å</span>
                    </button>
                    <button class="shopping-action-btn warning" id="clearCompletedBtn">
                        <span>–û—á–∏—Å—Ç–∏—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ</span>
                    </button>
                    <button class="shopping-action-btn danger" id="clearAllBtn">
                        <span>–û—á–∏—Å—Ç–∏—Ç—å –≤—Å—ë</span>
                    </button>
                </div>
            </div>
            <div class="shopping-items" id="shoppingItems">
                <!-- Shopping items will be dynamically added here -->
            </div>
            <div class="shopping-empty" id="shoppingEmpty">
                <div class="shopping-empty-icon">üõí</div>
                <h3>–°–ø–∏—Å–æ–∫ –ø–æ–∫—É–ø–æ–∫ –ø—É—Å—Ç</h3>
                <p>–î–æ–±–∞–≤—å—Ç–µ —Ç–æ–≤–∞—Ä—ã –∏–ª–∏ —Å—Ñ–æ—Ä–º–∏—Ä—É–π—Ç–µ —Å–ø–∏—Å–æ–∫ –∏–∑ –º–µ–Ω—é</p>
            </div>
        </div>

        <!-- Empty State -->
        <div class="empty-state" id="emptyState">
            <div class="empty-icon">üçΩÔ∏è</div>
            <h3>–†–µ—Ü–µ–ø—Ç–æ–≤ –ø–æ–∫–∞ –Ω–µ—Ç</h3>
            <p>–ù–∞–∂–º–∏ "–î–æ–±–∞–≤–∏—Ç—å —Ä–µ—Ü–µ–ø—Ç", —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å –∫–æ–ª–ª–µ–∫—Ü–∏—é!</p>
        </div>
    </div>

    <!-- Modal -->
    <div class="modal" id="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">–î–æ–±–∞–≤–∏—Ç—å —Ä–µ—Ü–µ–ø—Ç</h2>
                <button class="close-btn" id="closeModal">&times;</button>
            </div>
            <form class="recipe-form" id="recipeForm">
                <div class="form-group">
                    <label class="form-label">–ù–∞–∑–≤–∞–Ω–∏–µ —Ä–µ—Ü–µ–ø—Ç–∞ *</label>
                    <input type="text" class="form-input" id="recipeName" required placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –ü–∞—Å—Ç–∞ –ö–∞—Ä–±–æ–Ω–∞—Ä–∞">
                </div>
                
                <div class="form-group">
                    <label class="form-label">–¢–∏–ø –ø—Ä–∏—ë–º–∞ –ø–∏—â–∏ *</label>
                    <select class="form-select" id="mealType" required>
                        <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø</option>
                        <option value="first">üç≤ –ü–µ—Ä–≤–æ–µ –±–ª—é–¥–æ</option>
                        <option value="second">üçù –í—Ç–æ—Ä–æ–µ –±–ª—é–¥–æ</option>
                        <option value="salads">ü•ó –°–∞–ª–∞—Ç</option>
                        <option value="snacks">üç¢ –ó–∞–∫—É—Å–∫–∞</option>
                        <option value="baking">ü•ê –í—ã–ø–µ—á–∫–∞</option>
                        <option value="dessert">üç∞ –î–µ—Å–µ—Ä—Ç</option>
                    </select>
                </div>

                <div class="form-group">
                    <label class="form-label">–°—Å—ã–ª–∫–∞ –Ω–∞ —Ä–µ—Ü–µ–ø—Ç</label>
                    <div class="url-input-group">
                        <input type="url" class="form-input" id="recipeUrl" placeholder="https://...">
                        <button type="button" class="parse-btn" id="parseBtn" title="–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø–æ–ª–Ω–∏—Ç—å —Ñ–æ—Ä–º—É">
                            <span>üîÑ</span>
                            <span>–ü–∞—Ä—Å–∏—Ç—å</span>
                        </button>
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label">–û–ø–∏—Å–∞–Ω–∏–µ (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)</label>
                    <textarea class="form-textarea" id="recipeDescription" rows="3" placeholder="–ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Ä–µ—Ü–µ–ø—Ç–∞..."></textarea>
                </div>

                <div class="form-group">
                    <label class="form-label">–í—Ä–µ–º—è –ø—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–∏—è (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)</label>
                    <input type="text" class="form-input" id="cookingTime" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: 30 –º–∏–Ω">
                </div>

                <div class="form-group">
                    <label class="form-label">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ—Ä—Ü–∏–π (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)</label>
                    <input type="number" class="form-input" id="servings" min="1" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: 4">
                </div>

                <div class="form-group">
                    <label class="form-label">–ò–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—ã (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)</label>
                    <div class="ingredients-container" id="ingredientsContainer">
                        <div class="ingredient-item">
                            <input type="text" class="form-input ingredient-name" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç–∞">
                            <input type="text" class="form-input ingredient-quantity" placeholder="–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ">
                            <button type="button" class="remove-ingredient-btn" style="display: none;">‚úï</button>
                        </div>
                    </div>
                    <button type="button" class="add-ingredient-btn" id="addIngredientBtn">
                        <span>‚ûï</span>
                        <span>–î–æ–±–∞–≤–∏—Ç—å –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç</span>
                    </button>
                </div>

                <div class="form-group">
                    <label class="form-label">–ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)</label>
                    <div class="steps-container" id="stepsContainer">
                        <div class="step-item">
                            <div class="step-number">1</div>
                            <div class="step-content">
                                <textarea class="form-textarea step-text" rows="2" placeholder="–û–ø–∏—à–∏—Ç–µ —à–∞–≥ –ø—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–∏—è..."></textarea>
                                <input type="url" class="form-input step-image" placeholder="URL —Ñ–æ—Ç–æ —à–∞–≥–∞ (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)">
                            </div>
                            <button type="button" class="remove-step-btn" style="display: none;">‚úï</button>
                        </div>
                    </div>
                    <button type="button" class="add-step-btn" id="addStepBtn">
                        <span>‚ûï</span>
                        <span>–î–æ–±–∞–≤–∏—Ç—å —à–∞–≥</span>
                    </button>
                </div>

                <div class="form-group">
                    <label class="form-label">URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)</label>
                    <input type="url" class="form-input" id="imageUrl" placeholder="https://...">
                </div>

                <div class="form-group">
                    <label class="form-label">–°—Å—ã–ª–∫–∞ –Ω–∞ –≤–∏–¥–µ–æ (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)</label>
                    <input type="url" class="form-input" id="videoUrl" placeholder="https://youtube.com/...">
                </div>

                <button type="submit" class="submit-btn">
                    <span class="btn-icon">üíæ</span>
                    <span class="btn-text">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ä–µ—Ü–µ–ø—Ç</span>
                </button>
            </form>
        </div>
    </div>

    <!-- Toast Notification -->
    <div class="toast" id="toast">
        <span class="toast-icon">‚úÖ</span>
        <span class="toast-message">–†–µ—Ü–µ–ø—Ç —É—Å–ø–µ—à–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω!</span>
    </div>

    <!-- Delete Confirmation Modal -->
    <div class="modal" id="deleteModal">
        <div class="modal-content delete-modal-content">
            <div class="delete-modal-icon">üóëÔ∏è</div>
            <h2 class="delete-modal-title">–£–¥–∞–ª–∏—Ç—å —Ä–µ—Ü–µ–ø—Ç?</h2>
            <p class="delete-modal-text">–≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–µ–ª—å–∑—è –æ—Ç–º–µ–Ω–∏—Ç—å. –í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç–æ—Ç —Ä–µ—Ü–µ–ø—Ç?</p>
            <div class="delete-modal-actions">
                <button class="delete-modal-btn cancel" id="cancelDelete">–û—Ç–º–µ–Ω–∞</button>
                <button class="delete-modal-btn confirm" id="confirmDelete">–£–¥–∞–ª–∏—Ç—å</button>
            </div>
        </div>
    </div>

    <!-- Recipe Detail Modal -->
    <div class="modal" id="recipeDetailModal">
        <div class="modal-content recipe-detail-content">
            <div class="recipe-detail-header">
                <h2 class="recipe-detail-title" id="detailTitle">üìñ –ù–∞–∑–≤–∞–Ω–∏–µ —Ä–µ—Ü–µ–ø—Ç–∞</h2>
                <div class="detail-header-buttons">
                    <button class="open-recipe-btn" id="openRecipeBtn" title="–û—Ç–∫—Ä—ã—Ç—å —Ä–µ—Ü–µ–ø—Ç">
                        <span>üîó</span>
                    </button>
                    <button class="close-btn" id="closeDetailModal">&times;</button>
                </div>
            </div>
            <div class="recipe-detail-body">
                <div class="recipe-detail-image" id="detailImage">
                    <span class="recipe-emoji">üçΩÔ∏è</span>
                </div>
                <div class="recipe-detail-info">
                    <div class="recipe-detail-type" id="detailType">üçΩÔ∏è –¢–∏–ø –±–ª—é–¥–∞</div>
                    <div class="recipe-detail-time" id="detailTime">‚è±Ô∏è –í—Ä–µ–º—è –ø—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–∏—è</div>
                    <div class="recipe-detail-servings" id="detailServings">üë• –ü–æ—Ä—Ü–∏–∏</div>
                </div>
                <div class="recipe-detail-description">
                    <h3>–û–ø–∏—Å–∞–Ω–∏–µ</h3>
                    <p id="detailDescription">–û–ø–∏—Å–∞–Ω–∏–µ —Ä–µ—Ü–µ–ø—Ç–∞...</p>
                </div>
                <div class="recipe-detail-ingredients" id="detailIngredients" style="display: none;">
                    <div class="ingredients-header">
                        <h3>ü•ó –ò–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—ã</h3>
                        <div class="servings-adjuster">
                            <label for="servingsInput">–ü–æ—Ä—Ü–∏–π:</label>
                            <div class="servings-controls">
                                <button type="button" class="servings-btn" id="decreaseServings">‚àí</button>
                                <input type="number" id="servingsInput" min="1" max="50" value="4">
                                <button type="button" class="servings-btn" id="increaseServings">+</button>
                            </div>
                        </div>
                    </div>
                    <ul id="detailIngredientsList"></ul>
                </div>
                <div class="recipe-detail-steps" id="detailSteps" style="display: none;">
                    <h3>üìù –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è</h3>
                    <div id="detailStepsList"></div>
                </div>
                <div class="recipe-detail-video" id="detailVideo" style="display: none;">
                    <h3>üé¨ –í–∏–¥–µ–æ-–∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è</h3>
                    <div class="video-preview" id="videoPreview">
                        <div class="video-preview-placeholder">
                            <span class="video-preview-icon">‚ñ∂Ô∏è</span>
                            <span class="video-preview-text">–ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–µ–≤—å—é...</span>
                        </div>
                    </div>
                </div>
                <div class="recipe-detail-actions">
                    <a href="#" target="_blank" class="recipe-btn primary" id="detailUrl">
                        <span>üçΩÔ∏è</span>
                        <span>–û—Ç–∫—Ä—ã—Ç—å —Ä–µ—Ü–µ–ø—Ç</span>
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- Add/Edit Shopping Item Modal -->
    <div class="modal" id="shoppingModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title" id="shoppingModalTitle">–î–æ–±–∞–≤–∏—Ç—å —Ç–æ–≤–∞—Ä</h2>
                <button class="close-btn" id="closeShoppingModal">&times;</button>
            </div>
            <form class="shopping-form" id="shoppingForm">
                <div class="form-group">
                    <label class="form-label">–ù–∞–∑–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞ *</label>
                    <input type="text" class="form-input" id="shoppingItemName" required placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –ú–æ–ª–æ–∫–æ">
                </div>
                <div class="form-group">
                    <label class="form-label">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)</label>
                    <input type="text" class="form-input" id="shoppingItemQuantity" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: 2 –ª">
                </div>
                <div class="form-group">
                    <label class="form-label">–ö–∞—Ç–µ–≥–æ—Ä–∏—è (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)</label>
                    <select class="form-select" id="shoppingItemCategory">
                        <option value="">–ë–µ–∑ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏</option>
                        <option value="vegetables">ü•ï –û–≤–æ—â–∏</option>
                        <option value="fruits">üçé –§—Ä—É–∫—Ç—ã</option>
                        <option value="meat">ü•© –ú—è—Å–æ</option>
                        <option value="fish">üêü –†—ã–±–∞</option>
                        <option value="dairy">üßÄ –ú–æ–ª–æ—á–Ω—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã</option>
                        <option value="bakery">üçû –í—ã–ø–µ—á–∫–∞</option>
                        <option value="drinks">ü•§ –ù–∞–ø–∏—Ç–∫–∏</option>
                        <option value="snacks">üçø –ó–∞–∫—É—Å–∫–∏</option>
                        <option value="other">üì¶ –î—Ä—É–≥–æ–µ</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)</label>
                    <select class="form-select" id="shoppingItemPriority">
                        <option value="normal">–û–±—ã—á–Ω—ã–π</option>
                        <option value="high">–í—ã—Å–æ–∫–∏–π ‚≠ê</option>
                    </select>
                </div>
                <button type="submit" class="submit-btn">
                    <span class="btn-text" id="shoppingSubmitText">–î–æ–±–∞–≤–∏—Ç—å –≤ —Å–ø–∏—Å–æ–∫</span>
                </button>
            </form>
        </div>
    </div>

    <!-- Auth Modal -->
    <div class="modal" id="authModal">
        <div class="modal-content auth-modal-content">
            <div class="modal-header">
                <h2 class="modal-title" id="authTitle">–í—Ö–æ–¥ –≤ –∞–∫–∫–∞—É–Ω—Ç</h2>
                <button class="close-btn" id="closeAuthModal">&times;</button>
            </div>
            
            <!-- Email Auth -->
            <div class="auth-content" id="emailAuthContent">
                <div class="auth-subtabs">
                    <button class="auth-subtab active" data-subtab="login">–í—Ö–æ–¥</button>
                    <button class="auth-subtab" data-subtab="register">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</button>
                </div>
                <form class="auth-form" id="authForm">
                    <div class="form-group" id="nameGroup" style="display: none;">
                        <label class="form-label">–ò–º—è</label>
                        <div class="input-wrapper">
                            <span class="input-icon">üë§</span>
                            <input type="text" class="form-input" id="authName" placeholder="–í–∞—à–µ –∏–º—è">
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Email *</label>
                        <div class="input-wrapper">
                            <span class="input-icon">üìß</span>
                            <input type="email" class="form-input" id="authEmail" required placeholder="example@mail.com">
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="form-label">–ü–∞—Ä–æ–ª—å *</label>
                        <div class="input-wrapper">
                            <span class="input-icon">üîí</span>
                            <input type="password" class="form-input" id="authPassword" required placeholder="–ú–∏–Ω–∏–º—É–º 6 —Å–∏–º–≤–æ–ª–æ–≤">
                            <button type="button" class="password-toggle" id="passwordToggle">üëÅÔ∏è</button>
                        </div>
                    </div>
                    <button type="submit" class="submit-btn auth-submit-btn" id="authSubmitBtn">
                        <span class="btn-text" id="authSubmitText">–í–æ–π—Ç–∏</span>
                    </button>
                    <div class="auth-remember">
                        <label class="remember-me">
                            <input type="checkbox" id="authRemember">
                            <span class="checkmark"></span>
                            –ó–∞–ø–æ–º–Ω–∏—Ç—å –º–µ–Ω—è
                        </label>
                        <button type="button" class="forgot-password-btn" id="forgotPasswordBtn">–ó–∞–±—ã–ª–∏ –ø–∞—Ä–æ–ª—å?</button>
                    </div>
                    <div style="text-align: center; margin-top: 8px;">
                        <button type="button" class="resend-verification-btn" id="resendVerificationBtn" style="display: none; background: none; border: none; color: var(--primary-color); font-family: 'Comfortaa', cursive; font-size: 13px; cursor: pointer; padding: 0;">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –ø–∏—Å—å–º–æ –ø–æ–≤—Ç–æ—Ä–Ω–æ üìß</button>
                    </div>
                </form>
            </div>
            
            <!-- Google Auth -->
            <div class="auth-social">
                <div class="auth-divider">
                    <span>–∏–ª–∏</span>
                </div>
                <button class="google-auth-btn" id="googleAuthBtn">
                    <svg class="google-svg" viewBox="0 0 24 24" width="20" height="20">
                        <path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/>
                        <path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/>
                        <path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/>
                        <path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/>
                    </svg>
                    <span class="google-text">–í–æ–π—Ç–∏ —á–µ—Ä–µ–∑ Google</span>
                </button>
            </div>
            
            <div class="auth-error" id="authError"></div>
        </div>
    </div>

    <!-- My Account Modal -->
    <div class="modal" id="accountModal">
        <div class="modal-content account-modal-content">
            <div class="modal-header">
                <h2 class="modal-title">üë§ –ú–æ–π –∞–∫–∫–∞—É–Ω—Ç</h2>
                <button class="close-btn" id="closeAccountModal">&times;</button>
            </div>
            
            <!-- User Info -->
            <div class="account-user-info" id="accountUserInfo">
                <div class="account-avatar-container">
                    <div class="account-avatar" id="accountAvatar">üë§</div>
                    <button class="avatar-edit-btn" id="avatarEditBtn" title="–ò–∑–º–µ–Ω–∏—Ç—å –∞–≤–∞—Ç–∞—Ä">
                        <span>üì∑</span>
                    </button>
                    <input type="file" id="avatarInput" accept="image/*" style="display: none;">
                </div>
                <div class="account-details">
                    <div class="account-name-container">
                        <div class="account-name-wrapper">
                            <h3 class="account-name-display" id="accountName">–ì–æ—Å—Ç—å</h3>
                            <div class="account-name-input-container" id="accountNameInputContainer">
                                <input type="text" class="account-name-input" id="accountNameInput" placeholder="–í–∞—à–µ –∏–º—è">
                                <button class="save-name-btn" id="saveNameBtn" title="–°–æ—Ö—Ä–∞–Ω–∏—Ç—å">‚úì</button>
                                <button class="cancel-name-btn" id="cancelNameBtn" title="–û—Ç–º–µ–Ω–∞">‚úï</button>
                            </div>
                        </div>
                        <button class="edit-name-btn" id="editNameBtn" title="–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–º—è">‚úèÔ∏è</button>
                    </div>
                    <p class="account-email" id="accountEmail">–í–æ–π–¥–∏—Ç–µ –≤ –∞–∫–∫–∞—É–Ω—Ç</p>
                    <p class="account-status" id="accountStatus">–ù–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω</p>
                </div>
            </div>
            
            <!-- Account Stats -->
            <div class="account-stats" id="accountStats">
                <div class="stat-item">
                    <span class="stat-icon">üìñ</span>
                    <span class="stat-value" id="statRecipes">0</span>
                    <span class="stat-label">–†–µ—Ü–µ–ø—Ç–æ–≤</span>
                </div>
                <div class="stat-item">
                    <span class="stat-icon">üõí</span>
                    <span class="stat-value" id="statShopping">0</span>
                    <span class="stat-label">–ü–æ–∫—É–ø–æ–∫</span>
                </div>
                <div class="stat-item">
                    <span class="stat-icon">üìÖ</span>
                    <span class="stat-value" id="statMenu">0</span>
                    <span class="stat-label">–í –º–µ–Ω—é</span>
                </div>
            </div>
            
            <!-- Account Actions -->
            <div class="account-actions">
                <button class="account-btn" id="accountSyncBtn" style="display: none;">
                    <span class="account-btn-icon">üîÑ</span>
                    <span class="account-btn-text">–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å</span>
                </button>
                <button class="account-btn" id="accountPasswordBtn" style="display: none;">
                    <span class="account-btn-icon">üîë</span>
                    <span class="account-btn-text">–°–º–µ–Ω–∏—Ç—å –ø–∞—Ä–æ–ª—å</span>
                </button>
                <button class="account-btn" id="accountDeleteDataBtn" style="display: none;">
                    <span class="account-btn-icon">üóëÔ∏è</span>
                    <span class="account-btn-text">–£–¥–∞–ª–∏—Ç—å –¥–∞–Ω–Ω—ã–µ</span>
                </button>
                <button class="account-btn" id="accountVerifyEmailBtn" style="display: none;">
                    <span class="account-btn-icon">üìß</span>
                    <span class="account-btn-text">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –ø–∏—Å—å–º–æ –ø–æ–≤—Ç–æ—Ä–Ω–æ</span>
                </button>
                <p class="account-verification-status" id="accountVerificationStatus" style="display: none; text-align: center; font-size: 0.85rem; color: #ef4444; margin: 8px 0;"></p>
                <button class="account-btn danger" id="accountSignOutBtn">
                    <span class="account-btn-icon">üö™</span>
                    <span class="account-btn-text">–í—ã–π—Ç–∏</span>
                </button>
                <button class="account-btn" id="accountSignInBtn">
                    <span class="account-btn-icon">üîê</span>
                    <span class="account-btn-text">–í–æ–π—Ç–∏ / –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</span>
                </button>
            </div>
            
            <!-- Account Info -->
            <div class="account-info">
                <p class="account-info-text">
                    <span class="info-icon">üí°</span>
                    –í–∞—à–∏ —Ä–µ—Ü–µ–ø—Ç—ã —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –æ–±–ª–∞–∫–µ –∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É—é—Ç—Å—è –º–µ–∂–¥—É —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏.
                </p>
            </div>
        </div>
    </div>

    <!-- Mobile Bottom Navigation with horizontal scroll -->
    <nav class="mobile-nav" id="mobileNav">
        <button class="mobile-nav-item active" data-filter="all">
            <span class="mobile-nav-icon">üìñ</span>
            <span class="mobile-nav-label">–í—Å–µ</span>
        </button>
        <button class="mobile-nav-item" data-filter="first">
            <span class="mobile-nav-icon">üç≤</span>
            <span class="mobile-nav-label">–ü–µ—Ä–≤—ã–µ</span>
        </button>
        <button class="mobile-nav-item" data-filter="second">
            <span class="mobile-nav-icon">üçù</span>
            <span class="mobile-nav-label">–í—Ç–æ—Ä—ã–µ</span>
        </button>
        <button class="mobile-nav-item" data-filter="salads">
            <span class="mobile-nav-icon">ü•ó</span>
            <span class="mobile-nav-label">–°–∞–ª–∞—Ç—ã</span>
        </button>
        <button class="mobile-nav-item" data-filter="snacks">
            <span class="mobile-nav-icon">üç¢</span>
            <span class="mobile-nav-label">–ó–∞–∫—É—Å–∫–∏</span>
        </button>
        <button class="mobile-nav-item" data-filter="baking">
            <span class="mobile-nav-icon">ü•ê</span>
            <span class="mobile-nav-label">–í—ã–ø–µ—á–∫–∞</span>
        </button>
        <button class="mobile-nav-item" data-filter="dessert">
            <span class="mobile-nav-icon">üç∞</span>
            <span class="mobile-nav-label">–î–µ—Å–µ—Ä—Ç—ã</span>
        </button>
        <button class="mobile-nav-item" data-filter="favorites">
            <span class="mobile-nav-icon">‚ù§Ô∏è</span>
            <span class="mobile-nav-label">–õ—é–±–∏–º—ã–µ</span>
        </button>
        <button class="mobile-nav-item" data-filter="planner">
            <span class="mobile-nav-icon">üìÖ</span>
            <span class="mobile-nav-label">–ú–µ–Ω—é</span>
        </button>
        <button class="mobile-nav-item" data-filter="shopping">
            <span class="mobile-nav-icon">üõí</span>
            <span class="mobile-nav-label">–ü–æ–∫—É–ø–∫–∏</span>
        </button>
        <button class="mobile-nav-item account-nav-item" id="mobileAccountBtn">
            <span class="mobile-nav-icon">üë§</span>
            <span class="mobile-nav-label">–ê–∫–∫–∞—É–Ω—Ç</span>
        </button>
    </nav>

    <script src="script.js"></script>
    
    <!-- Service Worker Registration -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('./sw.js')
                    .then((registration) => {
                        console.log('ServiceWorker registered: ', registration);

                        // Check for updates - disabled for testing
                        // registration.addEventListener('updatefound', () => {
                        //     const newWorker = registration.installing;
                        //     newWorker.addEventListener('statechange', () => {
                        //         if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {
                        //             if (confirm('–î–æ—Å—Ç—É–ø–Ω–∞ –Ω–æ–≤–∞—è –≤–µ—Ä—Å–∏—è! –û–±–Ω–æ–≤–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É?')) {
                        //                 newWorker.postMessage({ action: 'skipWaiting' });
                        //                 window.location.reload();
                        //             }
                        //         }
                        //     });
                        // });

                        // Listen for controlling changes - disabled for testing
                        // navigator.serviceWorker.addEventListener('controllerchange', () => {
                        //     window.location.reload();
                        // });
                    })
                    .catch((registrationError) => {
                        console.log('ServiceWorker registration failed: ', registrationError);
                    });
            });
        }
    </script>
</body>
</html>
